{"ast":null,"code":"// En la sección de inicialización del juego\nconst initGame = async () => {\n  try {\n    // 1. Configurar rutas base correctamente\n    const basePath = process.env.PUBLIC_URL + '/assets';\n\n    // 2. Definir assets con rutas completas\n    const assets = [{\n      alias: 'bloque',\n      src: `${basePath}/bloque.png`\n    }, {\n      alias: 'suelo',\n      src: `${basePath}/suelo.png`\n    }, {\n      alias: 'fondo',\n      src: `${basePath}/ciudad.png`\n    }, {\n      alias: 'nube',\n      src: `${basePath}/nube.png`\n    }, {\n      alias: 'farol',\n      src: `${basePath}/farol.png`\n    }, {\n      alias: 'arbusto',\n      src: `${basePath}/arbusto.png`\n    }, {\n      alias: 'walk0',\n      src: `${basePath}/tile000.png`\n    }, {\n      alias: 'walk1',\n      src: `${basePath}/tile001.png`\n    }, {\n      alias: 'walk2',\n      src: `${basePath}/tile002.png`\n    }, {\n      alias: 'walk3',\n      src: `${basePath}/tile003.png`\n    }, {\n      alias: 'walk4',\n      src: `${basePath}/tile004.png`\n    }, {\n      alias: 'walk5',\n      src: `${basePath}/tile005.png`\n    }, {\n      alias: 'walk6',\n      src: `${basePath}/tile006.png`\n    }, {\n      alias: 'walk7',\n      src: `${basePath}/tile007.png`\n    }];\n\n    // 3. Inicializar Assets con configuración adecuada\n    Assets.init({\n      basePath: basePath,\n      preferWorkers: true,\n      crossOrigin: 'anonymous' // Importante para cargar texturas correctamente\n    });\n\n    // 4. Cargar assets con manejo de errores\n    await Promise.all(assets.map((asset, index) => Assets.load({\n      src: asset.src,\n      alias: asset.alias\n    }).then(() => {\n      setLoadProgress(Math.round((index + 1) / assets.length * 100));\n    }).catch(error => {\n      console.error(`Error loading ${asset.src}:`, error);\n      // Crear textura de fallback\n      const fallbackColor = 0xFF0000; // Rojo para identificar fallos\n      const fallbackTexture = createFallbackTexture(fallbackColor);\n      Assets.cache.set(asset.alias, fallbackTexture);\n      setLoadProgress(Math.round((index + 1) / assets.length * 100));\n    })));\n\n    // 5. Verificar texturas cargadas\n    const textures = {};\n    assets.forEach(asset => {\n      textures[asset.alias] = Assets.get(asset.alias);\n      if (!textures[asset.alias].valid) {\n        console.warn(`Texture ${asset.alias} not valid, using fallback`);\n        textures[asset.alias] = createFallbackTexture(0xFFFF00); // Amarillo para texturas inválidas\n      }\n    });\n    setLoading(false);\n\n    // Resto del código de inicialización usando las texturas...\n  } catch (error) {\n    console.error('Error al inicializar el juego:', error);\n    setModalContent(`\n      <h2>Error de carga</h2>\n      <p>No se pudieron cargar las texturas del juego</p>\n      <p>Detalles: ${error.message}</p>\n    `);\n    setModalVisible(true);\n    setLoading(false);\n  }\n};\n\n// Función de fallback mejorada\nconst createFallbackTexture = (color = 0xFF0000, width = 64, height = 64) => {\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d');\n\n  // Fondo de color\n  ctx.fillStyle = `#${color.toString(16).padStart(6, '0')}`;\n  ctx.fillRect(0, 0, width, height);\n\n  // Borde\n  ctx.strokeStyle = '#000000';\n  ctx.lineWidth = 2;\n  ctx.strokeRect(0, 0, width, height);\n\n  // Texto de error\n  ctx.fillStyle = '#000000';\n  ctx.font = '10px Arial';\n  ctx.textAlign = 'center';\n  ctx.fillText('FALLBACK', width / 2, height / 2);\n  return Texture.from(canvas);\n};","map":{"version":3,"names":["initGame","basePath","process","env","PUBLIC_URL","assets","alias","src","Assets","init","preferWorkers","crossOrigin","Promise","all","map","asset","index","load","then","setLoadProgress","Math","round","length","catch","error","console","fallbackColor","fallbackTexture","createFallbackTexture","cache","set","textures","forEach","get","valid","warn","setLoading","setModalContent","message","setModalVisible","color","width","height","canvas","document","createElement","ctx","getContext","fillStyle","toString","padStart","fillRect","strokeStyle","lineWidth","strokeRect","font","textAlign","fillText","Texture","from"],"sources":["C:/Users/emalv/OneDrive/Desktop/Portafolio/cv-ciudad/src/components/Juego.js"],"sourcesContent":["// En la sección de inicialización del juego\r\nconst initGame = async () => {\r\n  try {\r\n    // 1. Configurar rutas base correctamente\r\n    const basePath = process.env.PUBLIC_URL + '/assets';\r\n    \r\n    // 2. Definir assets con rutas completas\r\n    const assets = [\r\n      { alias: 'bloque', src: `${basePath}/bloque.png` },\r\n      { alias: 'suelo', src: `${basePath}/suelo.png` },\r\n      { alias: 'fondo', src: `${basePath}/ciudad.png` },\r\n      { alias: 'nube', src: `${basePath}/nube.png` },\r\n      { alias: 'farol', src: `${basePath}/farol.png` },\r\n      { alias: 'arbusto', src: `${basePath}/arbusto.png` },\r\n      { alias: 'walk0', src: `${basePath}/tile000.png` },\r\n      { alias: 'walk1', src: `${basePath}/tile001.png` },\r\n      { alias: 'walk2', src: `${basePath}/tile002.png` },\r\n      { alias: 'walk3', src: `${basePath}/tile003.png` },\r\n      { alias: 'walk4', src: `${basePath}/tile004.png` },\r\n      { alias: 'walk5', src: `${basePath}/tile005.png` },\r\n      { alias: 'walk6', src: `${basePath}/tile006.png` },\r\n      { alias: 'walk7', src: `${basePath}/tile007.png` }\r\n    ];\r\n\r\n    // 3. Inicializar Assets con configuración adecuada\r\n    Assets.init({\r\n      basePath: basePath,\r\n      preferWorkers: true,\r\n      crossOrigin: 'anonymous' // Importante para cargar texturas correctamente\r\n    });\r\n\r\n    // 4. Cargar assets con manejo de errores\r\n    await Promise.all(\r\n      assets.map((asset, index) => \r\n        Assets.load({\r\n          src: asset.src,\r\n          alias: asset.alias\r\n        }).then(() => {\r\n          setLoadProgress(Math.round(((index + 1) / assets.length) * 100));\r\n        }).catch(error => {\r\n          console.error(`Error loading ${asset.src}:`, error);\r\n          // Crear textura de fallback\r\n          const fallbackColor = 0xFF0000; // Rojo para identificar fallos\r\n          const fallbackTexture = createFallbackTexture(fallbackColor);\r\n          Assets.cache.set(asset.alias, fallbackTexture);\r\n          setLoadProgress(Math.round(((index + 1) / assets.length) * 100));\r\n        })\r\n      )\r\n    );\r\n\r\n    // 5. Verificar texturas cargadas\r\n    const textures = {};\r\n    assets.forEach(asset => {\r\n      textures[asset.alias] = Assets.get(asset.alias);\r\n      if (!textures[asset.alias].valid) {\r\n        console.warn(`Texture ${asset.alias} not valid, using fallback`);\r\n        textures[asset.alias] = createFallbackTexture(0xFFFF00); // Amarillo para texturas inválidas\r\n      }\r\n    });\r\n\r\n    setLoading(false);\r\n\r\n    // Resto del código de inicialización usando las texturas...\r\n  } catch (error) {\r\n    console.error('Error al inicializar el juego:', error);\r\n    setModalContent(`\r\n      <h2>Error de carga</h2>\r\n      <p>No se pudieron cargar las texturas del juego</p>\r\n      <p>Detalles: ${error.message}</p>\r\n    `);\r\n    setModalVisible(true);\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n// Función de fallback mejorada\r\nconst createFallbackTexture = (color = 0xFF0000, width = 64, height = 64) => {\r\n  const canvas = document.createElement('canvas');\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  const ctx = canvas.getContext('2d');\r\n  \r\n  // Fondo de color\r\n  ctx.fillStyle = `#${color.toString(16).padStart(6, '0')}`;\r\n  ctx.fillRect(0, 0, width, height);\r\n  \r\n  // Borde\r\n  ctx.strokeStyle = '#000000';\r\n  ctx.lineWidth = 2;\r\n  ctx.strokeRect(0, 0, width, height);\r\n  \r\n  // Texto de error\r\n  ctx.fillStyle = '#000000';\r\n  ctx.font = '10px Arial';\r\n  ctx.textAlign = 'center';\r\n  ctx.fillText('FALLBACK', width/2, height/2);\r\n  \r\n  return Texture.from(canvas);\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}